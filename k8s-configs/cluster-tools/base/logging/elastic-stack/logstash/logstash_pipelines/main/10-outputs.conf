output {
    if ([@metadata][index]) {
        opensearch {
          id => "OS_specified_index"
          hosts => ["https://opensearch-cluster-master.elastic-stack-logging.svc.cluster.local:9200"]
          user => "${OS_USER}"
          password => "${OS_PASSWORD}"
          cacert => "/usr/share/logstash/certs/ca.crt"
          sniffing => false
          index => "%{[@metadata][index]}-%{+YYYY.MM.dd}"
        }
    }
    else {
        opensearch {
          id => "OS_everything"
          hosts => ["https://opensearch-cluster-master.elastic-stack-logging.svc.cluster.local:9200"]
          user => "${OS_USER}"
          password => "${OS_PASSWORD}"
          cacert => "/usr/share/logstash/certs/ca.crt"
          sniffing => false
          index => "logstash-%{+YYYY.MM.dd}"
        }
    }
}